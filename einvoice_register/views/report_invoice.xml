<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="report_invoice_document" inherit_id="account.report_invoice_document">
            <xpath expr="//div[hasclass('page')]/h2" position="before">
                <div t-if="o.transporter_id">
                    <b>Transporter :</b>
                    <span t-field="o.transporter_id"/>
                    <br/>
                    <b>License Plate No. :</b>
                    <span t-field="o.license_plate_no"/>
                    <br/>
                    <b>Delivery Datetime :</b>
                    <span t-field="o.delivery_datetime"/>
                    <br/>
                </div>

            </xpath>

            <xpath expr="//div[@id='qrcode']" position="after">
                <div t-if="o.fic_number">
                    <p><strong>NIVF</strong>(FIC):
                        <t t-if="o.fic_number"/>
                    </p>
                    <p><strong>NSLF</strong>(IIC):
                        <t t-if="o.iic_code"/>
                    </p>
                    <p><strong>Business Unit</strong>: <t t-if="o.operating_unit_id.business_unit_code"/>
                    </p>
                    <p><strong>Operator</strong>: <t t-if="o.user_id.operator_code"/>
                    </p>
                </div>

                <div t-if="o.fic_number">
                    <img t-att-src="'data:image/*;base64,%s' % to_text(o.make_invoice_qr_code(o.iic_code, o.header_send_datetime, o.invoice_order_number, o.amount_total if o.move_type == 'out_invoice' else o.amount_total * -1))"
                         width="140px" height="140px"/>
                </div>
            </xpath>
        </template>
    </data>
</odoo>